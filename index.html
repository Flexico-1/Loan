<!doctype html>
<html lang="si">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flexico</title>
  <style>
    :root{
      --green-start: #16c172;
      --green-end: #0aa764;
      --bg: #f7fbfb;
      --card: #ffffff;
      --muted: #8b98a0;
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: "Segoe UI", Roboto, "Noto Sans", Arial, sans-serif;
      background: var(--bg);
      -webkit-font-smoothing: antialiased;
    }
    .app {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      box-sizing: border-box;
      padding: 0; /* reduce extra padding for mobile */
    }
    .topbar {
      width: 100%;
      max-width: 420px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 10px;
      box-sizing: border-box;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo-mark {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--green-start), var(--green-end));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 18px;
      box-shadow: 0 4px 10px rgba(10,167,100,0.2);
    }
    .brand-text {
      font-weight: 700;
      font-size: 18px;
    }
    .top-actions {
      display: flex;
      gap: 8px;
    }
    .btn {
      padding: 8px 12px;
      border-radius: 8px;
      border: 0;
      background: var(--card);
      box-shadow: 0 2px 6px rgba(0,0,0,0.06);
      font-weight: 600;
      cursor: pointer;
    }
    .card {
      width: 100%;
      max-width: 420px;
      background: var(--card);
      border-radius: 14px;
      padding: 16px;
      box-sizing: border-box;
      box-shadow: 0 8px 30px rgba(10,10,10,0.05);
      margin: 10px 0;
    }
    .headline {
      font-size: 20px;
      font-weight: 800;
      color: #111827;
      margin-bottom: 8px;
      text-align: center;
    }
    .sub {
      color: var(--muted);
      text-align: center;
      margin-bottom: 12px;
      line-height: 1.35;
    }
    .hero {
      width: 100%;
      height: 110px;
      border-radius: 10px;
      background: linear-gradient(90deg, #3fb88f, #1da36b);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      margin-bottom: 14px;
      text-align: center;
      padding: 10px;
      box-sizing: border-box;
    }
    .slider-row {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .amount-display {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .amount-display .label {
      font-weight: 700;
      font-size: 18px;
    }
    .amount-display .value {
      font-weight: 800;
      font-size: 18px;
    }
    input[type="range"] {
      -webkit-appearance: none;
      width: 100%;
      height: 8px;
      border-radius: 8px;
      background: linear-gradient(90deg, var(--green-start), var(--green-end));
      outline: none;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      background: #fff;
      border: 6px solid #0aa764;
      box-shadow: 0 4px 10px rgba(10,167,100,0.25);
    }
    .minmax {
      display: flex;
      justify-content: space-between;
      color: var(--muted);
      font-size: 13px;
      margin-top: 4px;
    }
    .results {
      margin-top: 14px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .result-box {
      background: #f6f9f8;
      border-radius: 10px;
      padding: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      min-height: 64px;
      box-sizing: border-box;
      justify-content: center;
    }
    .result-box .r-label {
      font-size: 12px;
      color: var(--muted);
    }
    .result-box .r-value {
      font-weight: 800;
      font-size: 16px;
      color: #0b3a2d;
    }
    .full-row {
      grid-column: 1 / -1;
    }
    .apply-row {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .apply-button {
      flex: 1;
      padding: 12px;
      border-radius: 10px;
      border: 0;
      background: linear-gradient(90deg, var(--green-start), var(--green-end));
      color: white;
      font-weight: 800;
      font-size: 16px;
      box-shadow: 0 8px 20px rgba(10,167,100,0.18);
      cursor: pointer;
    }
    .muted-note {
      font-size: 12px;
      color: var(--muted);
      text-align: center;
      margin-top: 10px;
    }

    /* ========== Sections after main card ========== */
    .eligibility-section, .loan-guide, .loan-article, .app-features, .contact-footer {
      width: 100%;
      max-width: 700px;
      margin: 30px auto;
      box-sizing: border-box;
      background: var(--card);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    }
    .eligibility-section {
      text-align: center;
    }
    .eligibility-section .question {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 15px;
    }
    .btn-toggle {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    .btn-toggle button {
      flex: 1;
      max-width: 130px;
      padding: 10px 15px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      background: #f1f1f1;
      color: #222;
    }
    .btn-toggle button.active {
      background: var(--green-start);
      color: #fff;
    }
    .eligibility-section .info-card {
      display: grid;
      gap: 15px;
      margin-top: 10px;
    }
    .eligibility-section .info-card .card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 15px;
      text-align: left;
    }
    .eligibility-section .card .icon {
      font-size: 28px;
      margin-bottom: 10px;
    }
    .eligibility-section .card h3 {
      font-size: 17px;
      margin: 0 0 5px;
    }
    .eligibility-section .card p {
      font-size: 14px;
      color: #555;
      margin: 0;
      line-height: 1.4;
    }

    .loan-guide .hero-title {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      margin-bottom: 25px;
    }
    .loan-guide .step {
      margin-bottom: 25px;
    }
    .loan-guide .step-number {
      font-size: 18px;
      color: var(--green-start);
      margin: 0;
    }
    .loan-guide .step-title {
      font-size: 18px;
      font-weight: bold;
      margin: 5px 0;
    }
    .loan-guide .step-desc {
      font-size: 14px;
      color: #555;
      margin: 0;
    }
    .loan-guide .loan-image {
      width: 100%;
      border-radius: 10px;
      margin-top: 20px;
    }

    .loan-article .article-title {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 20px;
      line-height: 1.5;
    }
    .loan-article p {
      font-size: 15px;
      color: #222;
      margin-bottom: 15px;
      line-height: 1.6;
    }
    .loan-article strong {
      color: var(--green-start);
    }
    .loan-article .chat-icon {
      width: 60px;
      height: 60px;
      background: var(--green-start);
      color: #fff;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      position: fixed;
      bottom: 20px;
      right: 20px;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    }

    .app-features .app-title {
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 20px;
      color: #111;
    }
    .app-features .feature-list {
      list-style: none;
      padding: 0;
      margin: 0 0 25px 0;
      text-align: left;
      font-size: 15px;
      color: #333;
    }
    .app-features .feature-list li {
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .app-features .app-image img {
      width: 100%;
      border-radius: 12px;
      margin: 20px 0;
    }
    .app-features .google-btn {
      display: inline-block;
      background: var(--green-start);
      color: #fff;
      font-weight: bold;
      text-decoration: none;
      padding: 12px 30px;
      border-radius: 8px;
      transition: background 0.3s;
    }
    .app-features .google-btn:hover {
      background: var(--green-end);
    }

    .contact-footer {
      background: var(--green-start);
      color: #fff;
      padding: 30px 20px 80px;
      text-align: center;
    }
    .contact-footer .contact-info {
      margin-bottom: 20px;
      text-align: left;
    }
    .contact-footer .contact-info p {
      margin-bottom: 15px;
      font-size: 14px;
    }
    .contact-footer .contact-info a {
      color: #fff;
      text-decoration: none;
      font-weight: 600;
    }
    .contact-footer .social-links {
      margin: 15px 0;
    }
    .contact-footer .social-links img {
      width: 35px;
      margin: 0 8px;
    }
    .contact-footer .store-links img {
      width: 120px;
      margin: 8px;
    }
    .contact-footer .footer-menu {
      margin-top: 25px;
    }
    .contact-footer .footer-menu p {
      margin: 5px 0;
      font-weight: 600;
      cursor: pointer;
    }
    .contact-footer .free-loan-btn {
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--green-end);
      color: #fff;
      font-weight: bold;
      padding: 10px 30px;
      border-radius: 30px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    /* ===== Responsive adjustments ===== */
    @media screen and (max-width: 480px) {
      .topbar, .card {
        padding: 12px;
      }
      .hero {
        height: auto;
        font-size: 18px;
        padding: 20px;
      }
      .headline {
        font-size: 18px;
      }
      .sub {
        font-size: 14px;
      }
      .apply-button {
        font-size: 14px;
        padding: 10px;
      }
      .loan-guide .hero-title {
        font-size: 20px;
      }
      .loan-guide .step-title {
        font-size: 16px;
      }
      .loan-guide .step-desc {
        font-size: 13px;
      }
      .loan-article .article-title {
        font-size: 20px;
      }
      .loan-article p {
        font-size: 14px;
      }
    }

  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- Top bar and brand -->
    <div class="topbar">
      <div class="brand">
        <div class="logo-mark">F</div>
        <div>
          <div class="brand-text">Flexico</div>
          <div id="brandSub" style="font-size:12px;color:var(--muted)">ඔබේ මුදල් සවන්ද</div>
        </div>
      </div>
      <div class="top-actions">
        <button class="btn" id="loginBtn">ඇතුල් වන්න</button>
        <button class="btn" id="menuBtn" aria-label="menu">⋮</button>
      </div>
    </div>

    <!-- Main calculator card -->
    <div class="card">
      <div class="headline" id="headline">ක්ෂණික මුදල් රු. 500,000 දක්වා</div>
      <div class="sub" id="sub">ඇප්ලයි කරන්න, විනාඩි කිහිපයකින් මුදල් ලබාගන්න.</div>
      <div class="hero" id="hero">Flexico — සරල හා වේගවත්</div>

      <div class="slider-row">
        <div class="amount-display">
          <div class="label" id="amountLabel">ණය මුදල</div>
          <div class="value">රු <span id="amountText">30,000</span></div>
        </div>
        <input id="amountRange" type="range" min="30000" max="500000" step="10000" value="30000" />
        <div class="minmax"><span>රු 30,000</span><span>රු 500,000</span></div>
      </div>

      <div class="results">
        <div class="result-box"><div class="r-label" id="r1">පොලී අනුපාතය (වාර්ෂික)</div><div class="r-value">7%</div></div>
        <div class="result-box"><div class="r-label" id="r2">වෙනුවෙන් ගෙවිය යුත්තේ මාසික</div><div class="r-value" id="monthlyValue">රු 0</div></div>
        <div class="result-box"><div class="r-label" id="r3">වාරික ගණන</div><div class="r-value" id="installmentsCount">-</div></div>
        <div class="result-box"><div class="r-label" id="r4">සම්පූර්ණ ගෙවිය යුතු මුදල</div><div class="r-value" id="totalPayable">රු 0</div></div>
        <div class="result-box full-row"><div class="r-label" id="r5">ඇප්ලයි කරන දිනය</div><div class="r-value" id="applyDate">-</div></div>
        <div class="result-box full-row"><div class="r-label" id="r6">පළමු වාරිකය ගෙවිය යුතු දිනය</div><div class="r-value" id="firstDueDate">-</div></div>
      </div>

      <div class="apply-row">
        <button class="apply-button" id="applyBtn">ඇප්ලයි කරන්න</button>
      </div>
      <div class="muted-note" id="note">සම්පූර්ණ ගණනය මාසික වාරික ආකෘතිය (amortized) අනුව ගණනය වේ.</div>
    </div>

    <!-- Eligibility Section -->
    <section class="eligibility-section">
      <h2 class="question">
        Flexico ඔබ සදහා <br>
        හොඳම තේරීමක් වන්නේ ඇයි?
      </h2>
      <div class="btn-toggle">
        <button class="active" id="btnYes">පසුගමු නය</button>
        <button id="btnNo">නැවත නය</button>
      </div>
      <div class="info-card">
        <div class="card">
          <div class="icon">⏳</div>
          <h3>විනාඩි 15ක් ඇතුලත ඔබේ මුදල් ලබාගන්න</h3>
          <p>
            සරල ලියාපදිංචි ක්‍රියාවලියක් සහ<br>
            නියමිත පසුගමු ඉක්මන් තීරණයක්.
          </p>
        </div>
        <div class="card">
          <div class="icon">📄</div>
          <h3>පහසුදීම සහ සරල කොන්දේසි</h3>
          <p>
           7%  පොලී අනුපාත යටතේ මුදල් ලබා ගන්නා<br>
            Rs 30,000 සිට 500,000 දක්වා<br>
            දින 180 සිට 360 දක්වා නියමිත ලැබා ගන්න.
          </p>
        </div>
      </div>
    </section>

    <!-- Loan Steps Section -->
    <section class="loan-guide">
      <h1 class="hero-title">ණයක් ලබා ගැනීම පහසුය!</h1>
      <div class="step">
        <h2 class="step-number">පියවර 1</h2>
        <h3 class="step-title">ඔබගේ අයදුම්පත ඉදිරිපත් කරන්න</h3>
        <p class="step-desc">ඔබගේ ඉල්ලීම යළිම සදාහ අයදුම්පත පුරවන්න</p>
      </div>
      <div class="step">
        <h2 class="step-number">පියවර 2</h2>
        <h3 class="step-title">ඉක්මන් ප්‍රතිචාරයක් ලබා ගන්න</h3>
        <p class="step-desc">තීරණ ගන්නම සදාහ ගතවන්නේ විනාඩියක් පමණි</p>
      </div>
      <div class="step">
        <h2 class="step-number">පියවර 3</h2>
        <h3 class="step-title">ඔබේ මුදල් හුස්ම විදින්න</h3>
        <p class="step-desc">මුදල් ඔබගේ බැංකු ගිණුමට බැර කරන ලැබේ</p>
      </div>
      <img src="https://i.ibb.co/jZxbYs77/Whats-App-Image-2025-10-03-at-04-26-31-52b1353d.png"
           alt="Happy customer" class="loan-image">
    </section>

    <!-- Article Section -->
    <section class="loan-article">
      <h1 class="article-title">
        අන්තර්ජාලය හරහා ගෙවීම නය ලබා දෙන වෙබ් අඩවියේ නිමි කිරීම පිළිබඳ තොරතුරු
      </h1>
      <p>
        <strong>Flexico</strong> වෙබ් අඩවිය ඔබට සාර්ථකව පිළිගන්නා, ශ්‍රී ලංකාව තුළ
        නීතිමය අයදුම්පතක් හෝ මාර්ගගත මුදල් ණය පහසුකමක් සපයන ආයතනයක් ලෙස
        විශ්වාසදායකව පිළිගනී!
      </p>
      <p>
        ඔබගේ ආදායම සහ පුද්ගලික තොරතුරු ඉතා සුරක්ෂිතව තබා ගැනීමට
        Flexico තාක්ෂණික සහ ආරක්ෂාකාරී ක්‍රම පද්ධති භාවිතා කරයි. මෙම සේවාව
        ඔබට ඉක්මනින්ම සහ පහසුවෙන් ණය ලබා ගැනීමට උපකාරී වේ.
      </p>
      <p>
        අන්තර්ජාලය හරහා ලාභදායි ණය පහසුකමක් සොයන විට,
        එය සත්‍ය සහ නීතිමය ආයතනයක් බව තහවුරු කරගන්න.
      </p>
      <p>
        ඔබ යම් අන්තර්ජාල මුදල් ණය අයදුම්පතක් භාවිතා කිරීමට පෙර,
        එය සත්‍ය ආයතනයක් බව පරීක්ෂා කරන්න.
      </p>
      <div class="chat-icon">💬</div>
    </section>

    <!-- App Features Section -->
    <section class="app-features">
      <h2 class="app-title">ඇප් එකේ අතිරේක විශේෂාංග</h2>
      <ul class="feature-list">
        <li>✅ ඉල්ලීම සහ ගෙවීම පහසු ලෙස කරගත හැක</li>
        <li>🎁 විශේෂ දීමනා සහ ප්‍රවර්ධන</li>
        <li>🔥 වැඩි හොඳ කොන්දේසි</li>
        <li>👍 අනුමත වීමේ හැකියාව වැඩි වේ</li>
      </ul>
      <div class="app-image">
        <img src="https://imgur.com/a/iXVxSOc"
             alt="App Image">
      </div>
      <a href="#" class="google-btn">Google Play</a>
    </section>

<!-- ====================== Footer Section Start ====================== -->
<footer style="background:#22182a; color:#fff; font-family:'Noto Sans Sinhala',sans-serif; padding:40px 20px;">
  <div style="max-width:900px; margin:auto;">
    <!-- Contact info -->
    <div style="display:flex; flex-wrap:wrap; gap:30px; margin-bottom:20px;">
      <!-- Phone -->
      <div style="display:flex; align-items:center; gap:10px; min-width:220px;">
        <svg viewBox="0 0 24 24" width="26" height="26" style="stroke:#22c18a; fill:none; stroke-width:2.5;">
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.86 19.86 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.86 19.86 0 0 1-3.07-8.63A2 2 0 0 1 4.08 2h3a2 2 0 0 1 2 1.72c.12 1.21.47 2.38 1.03 3.47a2 2 0 0 1-.45 2.11L9.91 11.09a16 16 0 0 0 6 6l1.78-1.78a2 2 0 0 1 2.11-.45c1.09.56 2.26.91 3.47 1.03A2 2 0 0 1 22 16.92z"/>
        </svg>
        <div>
          <div style="font-size:20px; font-weight:700; color:#22c18a;">158358</div>
          <div style="font-size:13px;">දුරකථන / Phone</div>
        </div>
      </div>

      <!-- Email -->
      <div style="display:flex; align-items:center; gap:10px; min-width:220px;">
        <svg viewBox="0 0 24 24" width="24" height="24" style="stroke:#fff; fill:none; stroke-width:1.6;">
          <rect x="2" y="4" width="20" height="16" rx="2" ry="2"/>
          <path d="M22 6 L12 13 L2 6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div>
          <div style="font-size:16px; font-weight:700;">inf@monigo.lk</div>
          <div style="font-size:13px;">Email / විද්‍යුත් තැපෑල</div>
        </div>
      </div>

      <!-- Time -->
      <div style="display:flex; align-items:center; gap:10px; min-width:220px;">
        <svg viewBox="0 0 24 24" width="24" height="24" style="stroke:#fff; fill:none; stroke-width:1.6;">
          <circle cx="12" cy="12" r="9" />
          <path d="M12 7v6l4 2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <div>
          <div style="font-size:16px;">සඳුදා - සිකුරා / Mon - Fri</div>
          <div style="font-size:13px;">උදේ 8.30 සිට සවස 5.30 දක්වා</div>
        </div>
      </div>
    </div>

    <hr style="border-color:rgba(255,255,255,0.1); margin:20px 0;">

    <!-- Expandable sections -->
    <div style="display:grid; gap:10px;">
      <div class="accordion">
        <button class="acc-btn">
          <span>සමාගම / Company</span>
          <span class="arrow">⌄</span>
        </button>
        <div class="acc-content">
          <p>
            මෙය සමාගමේ පිළිබඳ විස්තරයක් ය. <br>
            You can add company description, mission, vision or about text here.
          </p>
        </div>
      </div>

      <div class="accordion">
        <button class="acc-btn">
          <span>පාරිභෝගිකයා / Partners</span>
          <span class="arrow">⌄</span>
        </button>
        <div class="acc-content">
          <p>
            පාරිභෝගිකයින් හා සහයෝගිතා පිළිබඳ තොරතුරු. <br>
            Add partner / collaboration details here.
          </p>
        </div>
      </div>

      <div class="accordion">
        <button class="acc-btn">
          <span>සමාජ මාධ්‍ය / Social</span>
          <span class="arrow">⌄</span>
        </button>
        <div class="acc-content">
          <p>
            Facebook, Instagram, LinkedIn වැනි links add කරන්න පුළුවන්. <br>
            Example: <a href="#" style="color:#22c18a;">facebook.com/monigo</a>
          </p>
        </div>
      </div>
    </div>

    <hr style="border-color:rgba(255,255,255,0.1); margin:20px 0;">

    <!-- bottom links -->
    <div style="display:flex; justify-content:space-between; flex-wrap:wrap; font-size:13px; color:#b9a8c0;">
      <div>නිවසම සහ කොන්දේසි</div>
      <div>රහස්‍යතා ප්‍රතිපත්ති</div>
    </div>

    <p style="margin-top:16px; font-size:13px; color:#b9a8c0;">© 2024 - 2025 සියලුම හිමිකම් ඇවිරිණ</p>
    <p style="font-size:13px; color:#8b7a96;">
 LIMITED — Registered in Sri Lanka, Reg. No PV 00221752<br>
      Address: No.31/5, M & M Center, Level 01, Kotte Road, Rajagiriya.
    </p>
  </div>

  <!-- Accordion CSS -->
  <style>
    .accordion {
      background:#2a1e38;
      border-radius:8px;
      overflow:hidden;
    }
    .acc-btn {
      background:none;
      border:none;
      color:#fff;
      width:100%;
      text-align:left;
      font-weight:700;
      font-size:16px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:14px 16px;
      cursor:pointer;
    }
    .acc-btn .arrow {
      transition:transform 0.3s ease;
    }
    .acc-content {
      max-height:0;
      overflow:hidden;
      transition:max-height 0.4s ease, padding 0.3s ease;
      background:#352647;
      padding:0 16px;
    }
    .acc-content p {
      margin:10px 0;
      font-size:14px;
      color:#cdbedf;
      line-height:1.5;
    }
    .accordion.active .acc-content {
      max-height:200px; /* adjust height as needed */
      padding:10px 16px 14px;
    }
    .accordion.active .arrow {
      transform:rotate(180deg);
    }
  </style>

  <!-- Accordion JS -->
  <script>
    document.querySelectorAll('.accordion').forEach(acc => {
      const btn = acc.querySelector('.acc-btn');
      btn.addEventListener('click', () => {
        acc.classList.toggle('active');
      });
    });
  </script>
</footer>
<!-- ====================== Footer Section End ====================== -->

  <script>
    // Formatter
    const fmt = (n) => n.toLocaleString('en-US');

    const amountRange = document.getElementById('amountRange');
    const amountText = document.getElementById('amountText');
    const monthlyValue = document.getElementById('monthlyValue');
    const totalPayable = document.getElementById('totalPayable');
    const installmentsCount = document.getElementById('installmentsCount');
    const applyDateEl = document.getElementById('applyDate');
    const firstDueDateEl = document.getElementById('firstDueDate');
    const applyBtn = document.getElementById('applyBtn');

    const ANNUAL_RATE = 0.07;
    const MONTH_RATE = ANNUAL_RATE / 12;

    function getInstallmentMonths(amount) {
      if (amount <= 80000) return 6;
      if (amount > 80000 && amount <= 120000) return 8;
      if (amount > 120000 && amount <= 200000) return 6;
      if (amount > 200000 && amount <= 300000) return 10;
      return 12;
    }
    function calculate(amount) {
      const n = getInstallmentMonths(amount);
      const r = MONTH_RATE;
      let monthly;
      if (r === 0) monthly = amount / n;
      else monthly = (r * amount) / (1 - Math.pow(1 + r, -n));
      return { monthly, total: monthly * n, n };
    }
    function addMonthsKeepDay(date, months) {
      const d = new Date(date.getTime());
      const day = d.getDate();
      d.setMonth(d.getMonth() + months);
      if (d.getDate() !== day) d.setDate(0);
      return d;
    }

    function updateAll() {
      const amt = Number(amountRange.value);
      amountText.textContent = fmt(amt);
      const { monthly, total, n } = calculate(amt);
      monthlyValue.textContent = 'රු ' + fmt(Math.round(monthly));
      totalPayable.textContent = 'රු ' + fmt(Math.round(total));
      installmentsCount.textContent = n + " වාරික";
      const now = new Date();
      applyDateEl.textContent = now.toLocaleDateString('si-LK', { year: 'numeric', month: 'long', day: 'numeric' });
      const firstDue = addMonthsKeepDay(now, 1);
      firstDueDateEl.textContent = firstDue.toLocaleDateString('si-LK', { year: 'numeric', month: 'long', day: 'numeric' });
    }

    // Set event
    amountRange.addEventListener('input', updateAll);

    // Initialize
    updateAll();
  </script>
</body>
</html>


